var EditPostPreviewCustomize=function(a,b){"use strict";var c={data:{previewed_post:null}};return"undefined"!=typeof _editPostPreviewCustomizeExports&&a.extend(c.data,_editPostPreviewCustomizeExports),c.init=function(){b.bind("ready",function(){c.ready()})},c.populateSettings=function(){var a,d;if(!c.settingsPopulated){if(c.settingsPopulated=!0,b.previewer.unbind("customized-posts",c.populateSettings),a="previewedCustomizePostSettings["+String(c.data.previewed_post.ID)+"]",d=sessionStorage.getItem(a),!d)return void("undefined"!=typeof console&&console.warn&&console.warn("Missing previewedCustomizePostSettings"));sessionStorage.removeItem(a),d=JSON.parse(d),_.each(d,function(a,c){b(c,function(b){_.isObject(a)?b.set(_.extend({},b.get()||{},a)):b.set(a)})})}},c.ready=function(){b.previewer.bind("customized-posts",c.populateSettings),b.state("saved").set(!0).validate=function(){return!0},b.panel.each(c.deactivatePanel),b.panel.bind("add",c.deactivatePanel),b.section.each(c.deactivateSection),b.section.bind("add",c.deactivateSection),c.parentFrame=new b.Messenger({url:b.settings.url.parent,channel:"loader"}),c.parentFrame.bind("populate-setting",function(a){b.has(a.id)&&b(a.id).set(a.value)}),b("post["+c.data.previewed_post.post_type+"]["+c.data.previewed_post.ID+"]",function(a){a.bind(function(b){var d={};d[a.id]=b,c.sendSettingsToEditPostScreen(d)})}),c.parentFrame.send("customize-post-preview-ready")},c.sendSettingsToEditPostScreen=function(a){c.parentFrame.send("customize-post-settings-data",a)},c.deactivatePanel=function(a){var b="posts["+c.data.previewed_post.post_type+"]"===a.id;a.active.set(b),a.active.validate=function(){return b}},c.deactivateSection=function(a){var b="post["+c.data.previewed_post.post_type+"]["+String(c.data.previewed_post.ID)+"]"===a.id;a.active.set(b),a.active.validate=function(){return b}},c}(jQuery,wp.customize);