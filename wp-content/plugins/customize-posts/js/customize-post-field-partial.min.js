!function(a,b){"use strict";a.selectiveRefresh.partialConstructor.post_field=a.selectiveRefresh.partialConstructor.deferred.extend({initialize:function(b,c){var d,e,f=this,g=/^post\[(.+?)]\[(-?\d+)]\[(.+?)](?:\[(.+?)])?$/;if(d=c||{},d.params=d.params||{},e=b.match(g),!e)throw new Error("Bad PostFieldPartial id. Expected post[:post_type][:post_id][:field_id]");d.params.post_type=e[1],d.params.post_id=parseInt(e[2],10),d.params.field_id=e[3],d.params.placement=e[4]||"",a.selectiveRefresh.partialConstructor.deferred.prototype.initialize.call(f,b,d),f.addInstantPreviews()},addInstantPreviews:function(){var c,d=this;if(1!==d.settings().length)throw new Error("Expected one single setting.");c=d.settings()[0],"post_title"===d.params.field_id&&a(c,function(a){a.bind(function(a,c){!a||c&&a.post_title===c.post_title||(_.each(d.placements(),function(b){var c=b.container.find("> a");c.length||(c=b.container),c.text(a.post_title)}),"page"===d.params.post_type&&b(".page_item.page-item-"+d.params.post_id+":not(.menu-item) > a").text(a.post_title))})})},refresh:function(){var c,d=this;return a.previewPosts.data.isSingular||-1===_.indexOf(a.previewPosts.data.queriedOrderbyFields,d.params.field_id)?(c=a.selectiveRefresh.partialConstructor.deferred.prototype.refresh.call(d),c.done(function(){d.hadInvalidSettings=!1,_.each(d.settings(),function(b){var c=a.settingValidities(b);c&&!0!==c.get()&&(d.hadInvalidSettings=!0)})}),c):(a.selectiveRefresh.requestFullRefresh(),c=b.Deferred(),c.reject(),c)},showControl:function(){var b=this,c=b.params.primarySetting;c||(c=_.first(b.settings())),a.preview.send("focus-control",c+"["+b.params.field_id+"]")},isRelatedSetting:function(b,c,d){var e=this;return!(!e.hadInvalidSettings&&_.isObject(c)&&_.isObject(d)&&e.params.field_id&&c[e.params.field_id]===d[e.params.field_id])&&a.selectiveRefresh.partialConstructor.deferred.prototype.isRelatedSetting.call(e,b,c,d)}})}(wp.customize,jQuery);