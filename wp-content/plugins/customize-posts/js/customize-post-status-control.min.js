!function(a){"use strict";a.controlConstructor.post_status=a.controlConstructor.dynamic.extend({initialize:function(b,c){var d,e=this;d={},d.params=_.extend({type:"post_status",label:a.Posts.data.l10n.fieldStatusLabel,active:!0,setting_property:"post_status",field_type:"select",choices:a.Posts.data.postStatusChoices,updateChoicesInterval:1e3},c.params||{}),a.controlConstructor.dynamic.prototype.initialize.call(e,b,d),e.deferred.embedded.done(function(){var b,c=50,d=500;e.selectElement=e.container.find("select"),e.optionFutureElement=e.selectElement.find("option[value=future]"),e.optionPublishElement=e.selectElement.find("option[value=publish]"),e.trashLink=e.container.find(".trash"),e.untrashLink=e.container.find(".untrash"),a.control(e.id,function(){e.keepUpdatingChoices()}),e.setting.bind(function(a,b){a.post_status===b.post_status&&a.post_date===b.post_date||e.updateChoices()}),_.delay(function(){e.toggleTrash()},c),e.originalPostStatus=e.setting().post_status,e.setting.bind(function(a,b){(a.post_status!==b.post_status&&"trash"===a.post_status||"trash"===b.post_status)&&e.toggleTrash()}),b=function(){var b=a.section(e.section());b&&b.collapse()},e.trashLink.on("click",function(a){var c=_.clone(e.setting.get());a.preventDefault(),c.post_status="trash",e.setting.set(c),_.delay(b,d)}),e.untrashLink.on("click",function(a){var b=_.clone(e.setting.get());a.preventDefault(),b.post_status=e.originalPostStatus,e.setting.set(b)})})},updateChoices:function(){var b,c,d,e=this,f=e.setting.get();c=a.Posts.parsePostDate(f.post_date),d=a.Posts.parsePostDate(a.Posts.getCurrentTime()),b=c>d,b&&"publish"===f.post_status&&c-d<15e3&&(b=!1),e.optionFutureElement.prop("disabled")===b&&e.optionFutureElement.prop("disabled",!b),e.optionPublishElement.prop("disabled")!==b&&e.optionPublishElement.prop("disabled",b),(b&&"publish"===f.post_status||!b&&"future"===f.post_status)&&(f=_.clone(f),f.post_status=b?"future":"publish",e.setting.set(f))},keepUpdatingChoices:function(){var b=this;return a.control.has(b.id)?(b.updateChoices(),void(b.updateChoicesIntervalId=setTimeout(function(){b.keepUpdatingChoices()},b.params.updateChoicesInterval))):void(b.updateChoicesIntervalId=null)},toggleTrash:function(){var b,c,d,e,f=this;e="trash"===f.setting.get().post_status,f.trashLink&&f.trashLink.toggle(!e),f.originalPostStatus&&f.untrashLink.toggle(Boolean(e&&f.originalPostStatus)),b=a.section(f.section.get()),b&&(c=b.container.closest(".accordion-section"),d=c.find(".accordion-section-title:first"),c.toggleClass("is-trashed",e),!0===e?0===d.find(".customize-posts-trashed").length&&d.append(wp.template("customize-posts-trashed")()):c.find(".customize-posts-trashed").remove())}})}(wp.customize);